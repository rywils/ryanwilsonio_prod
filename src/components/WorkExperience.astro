---
import { experiences } from "src/data/experiences.ts"
import ryanwilsonioIcon2 from '../assets/experience/ryanwilsonio2.png';
import ryanwilsonioIcon from '../assets/experience/ryanwilsonio.png';
import dhpaceIcon from '../assets/experience/dhpace.png';
import blueallyIcon from '../assets/experience/blueally.webp';
import caseysIcon from '../assets/experience/caseys.svg';
import microsoftIcon from '../assets/experience/microsoft.svg';
---

<script src="https://unpkg.com/alpinejs" defer></script>

<section class="mt-16">
  <h2 class="text-2xl font-bold mb-6 text-(--primary-green)">Work Experience</h2>

  <table class="w-full border-separate border-spacing-y-6">
    <tbody>
      {experiences.map(job => (
        <tr x-data="{ open: false }" class="cursor-pointer group">
          
          <td class="align-top w-full" @click="open = !open">
            <div class="flex items-center gap-4">
              <img
                src={job.icon.src}
                alt={job.company}
                class="h-12 w-12 rounded-full object-contain bg-transparent border-2 border-neutral-800 p-2"
              />
              
              <div>
                <div class="font-medium text-[15px] text-(--primary-blue) group-hover:text-(--primary-green)">{job.title}</div>
                <div class="text-sm text-neutral-400">{job.company}</div>
              </div>
            </div>

            <div
              x-show="open"
              x-transition
              class="mt-3 ml-16 text-sm text-neutral-300 leading-relaxed"
            >
              <p>{job.description}</p>

              <ul class="mt-2 space-y-1 list-disc ml-4">
                {job.achievements.map(a => (
                  <li>{a}</li>
                ))}
              </ul>
            </div>
          </td>

          <td class="align-top text-right whitespace-nowrap text-[14px]" @click="open = !open">
            <div class="flex items-center justify-end gap-2">
              <span class="text-(--primary-blue) group-hover:text-(--primary-green)">{job.period}</span>

              <svg
                x-bind:class="open ? 'rotate-90' : ''"
                class="h-4 w-4 transition-transform fill-(--primary-blue) group-hover:fill-(--primary-green)"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M6.293 4.293a1 1 0 011.414 0L13 9.586a1 1 0 010 1.414l-5.293 5.293a1 1 0 01-1.414-1.414L10.586 10 6.293 5.707a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
          </td>
          
        </tr>
      ))}
    </tbody>
  </table>
</section>