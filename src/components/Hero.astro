---
import '/src/styles/globals.css';
import { Mail, Download, ArrowUpRight } from '@lucide/astro';
import { Image } from 'astro:assets';
import myBitmoji from '../assets/bitmoji.png';
import Encryptedtext from './Encryptedtext.astro';
import Seperator from './Seperator.astro';
import GradientBorder from './GradientBorder.astro';
import GlowCard from './ui/GlowCard.astro';
import HeroLamp from './ui/HeroLamp.astro';
import GlowCardMotion from './hero/GlowCardMotion';

const github = "data:image/svg+xml;base64,...";
const linkedin = "data:image/svg+xml;base64,...";
const bluesky = "data:image/svg+xml;base64,...";

const logos = [
  { icon: 'logos:react', color: '#61DAFB' },
  { icon: 'logos:laravel', color: '#FF2D20' },
  { icon: 'logos:python', color: '#3776AB' },
  { icon: 'logos:linux-tux', color: '#FCC624' },
  { icon: 'logos:vue', color: '#4FC08D' },
  { icon: 'logos:nodejs-icon', color: '#339933' },
  { icon: 'logos:docker-icon', color: '#2496ED' },
];

const socialLinks = [
  { icon: 'https://api.iconify.design/simple-icons:github.svg', link: 'https://github.com/rywils', isImage: true },
  { icon: 'https://api.iconify.design/simple-icons:linkedin.svg', link: 'https://linkedin.com/in/rywils', isImage: true },
  { icon: 'https://api.iconify.design/simple-icons:bluesky.svg', link: 'https://bsky.app/rywils', isImage: true },
  { Icon: Mail, link: 'mailto:ryan@ryanwilson.io', isImage: false },
];
---

<div class="hero-wrap h-full w-full flex flex-col md:items-center md:justify-center antialiased relative border-b-1 border-[#10191d] shadow-md shadow-[#0a0a0a]">
  <div class="p-4 mx-auto relative z-10 w-full pt-10 md:pt-0">
    <section id="hero" class="flex flex-col justify-center relative py-6 overflow-visible">
      <HeroLamp />

      <GlowCardMotion className="mt-10 max-w-4xl mx-auto" client:load>
        <div class="max-w-5xl mx-auto px-8 sm:px-12 lg:px-16 relative z-50 h-full flex justify-center">
          <div class="flex flex-col lg:flex-row justify-center gap-12 lg:gap-20 relative z-50 w-full max-w-5xl mx-auto p-4">

            <!-- AVATAR + SKILLS -->
            <div class="mt-12 lg:mt-0 mb-8 lg:mb-0 flex justify-center flex-shrink-0 items-center">
              <div class="profile-container">
                <div class="profile-picture">
                  <Image src={myBitmoji} alt="Avatar" class="profile-img" loading="eager" />
                </div>

                <!-- SOFI-STYLE ICONS -->
                <div class="skills-layer">
                  {logos.map((logo, i) => (
                    <span class={`skill skill-${i}`} style={`--glow:${logo.color}`}>
                      <img src={`https://api.iconify.design/${logo.icon}.svg`} alt="" />
                    </span>
                  ))}
                </div>
              </div>
            </div>

            <!-- TEXT -->
            <div class="text-center lg:text-left flex-1 max-w-2xl relative z-50">
              <h1 class="text-3xl sm:text-5xl mb-2 font-bold text-(--primary-green)">
                Ryan Wilson
              </h1>

              <p class="text-sm md:text-lg lg:text-xl text-muted-foreground">
                Solutions Architect & Full-Stack Developer
              </p>

              <div class="text-sm md:text-lg mb-4 uppercase flex gap-2 h-5 items-center justify-center lg:justify-start text-muted-foreground">
                <Encryptedtext text="Security" />
                <Seperator orientation="vertical" />
                <Encryptedtext text="Linux" revealDelayMs={200} flipDelayMs={50} />
                <Seperator orientation="vertical" />
                <Encryptedtext text="DevOps" revealDelayMs={300} flipDelayMs={50} />
              </div>

              <GradientBorder />

              <p class="text-lg max-w-2xl mx-auto lg:mx-0 mb-8 text-muted-foreground">
                I'm a Solutions Architect, Full-Stack Developer, and Cybersecurity Enthusiast. I primarily come from a background of network engineering and cloud architecture with a passion for building efficient, scalable, and secure digital solutions.
              </p>
            </div>
          </div>
        </div>

        <!-- SOCIALS -->
        <div class="absolute top-5 right-5 flex flex-col items-center gap-3 z-50">
          {socialLinks.map(({ icon, link, isImage }, index) => (
            <a href={link} target="_blank" rel="noopener noreferrer"
              class={`social__link social__link-${index + 1} w-8 h-8 flex items-center justify-center rounded-full border border-[var(--secondary-purple)] glow-primary-purple hover:scale-110 transition`}>
              {isImage ? <span class="social-icon" style={`--icon-url: url(${icon});`}></span> : <Mail size={16} color="var(--secondary-purple)" />}
            </a>
          ))}
        </div>
      </GlowCardMotion>
    </section>
  </div>
</div>

<style>
.profile-container {
  position: relative;
  width: 216px;
  height: 216px;
  display: grid;
  place-items: center;
  transform: translateX(0);
}

@media (max-width: 640px) {
  .profile-container {
    transform: translateX(0);
  }

  .hero-wrap {
    overflow-x: hidden;
  }
}

.profile-picture {
  z-index: 2;
  position: relative;
  width: 200px;
  height: 200px;
  display: grid;
  place-items: center;
}

.profile-img {
  width: 200px  ;
  height: 200px;
  border-radius: 50%;
  border: 4px solid rgba(138,77,255,0.2);
}

/* === SOFI STYLE ICONS === */

.skills-layer {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  pointer-events: none;
  transform: translate(-50%, -50%);
  z-index: 10;
}

.skill {
  position: absolute;
  top: 0;
  left: 0;
  width: 42px;
  height: 42px;
  background: rgba(10,10,10,.9);
  border-radius: 10px;
  border: 1.5px solid var(--glow);
  box-shadow: 0 0 14px color-mix(in srgb, var(--glow) 65%, transparent);
  opacity: 0;
  transform: translate(-50%, -50%) translate(var(--x), var(--y));
  animation:
    from-right 1.3s ease-in-out forwards var(--enter-delay),
    floating 5s ease-in-out var(--float-delay) infinite;
}

.skill img {
  width: 70%;
  height:   70%;
  margin: 15%;
}

.social-icon {
  width: 16px;
  height: 16px;
  display: inline-block;
  background-color: var(--secondary-purple);
  filter: drop-shadow(0 0 9px rgba(138, 43, 226, 0.7));
  -webkit-mask-image: var(--icon-url);
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-position: center;
  -webkit-mask-size: contain;
  mask-image: var(--icon-url);
  mask-repeat: no-repeat;
  mask-position: center;
  mask-size: contain;
}

@-webkit-keyframes bounce-in-left {
  0% {
    -webkit-transform: translateX(-500px) scale(1);
            transform: translateX(-500px) scale(1);
    -webkit-animation-timing-function: ease-in;
            animation-timing-function: ease-in;
    opacity: 0;
  }
  38% {
    -webkit-transform: translateX(0) scale(0.94);
            transform: translateX(0) scale(0.94);
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
    opacity: 1;
  }
  55% {
    -webkit-transform: translateX(-65px) scale(1.02);
            transform: translateX(-65px) scale(1.02);
    -webkit-animation-timing-function: ease-in;
            animation-timing-function: ease-in;
  }
  72% {
    -webkit-transform: translateX(0) scale(0.96);
            transform: translateX(0) scale(0.96);
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
  }
  81% {
    -webkit-transform: translateX(-28px) scale(1.01);
            transform: translateX(-28px) scale(1.01);
    -webkit-animation-timing-function: ease-in;
            animation-timing-function: ease-in;
  }
  90% {
    -webkit-transform: translateX(0) scale(0.98);
            transform: translateX(0) scale(0.98);
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
  }
  95% {
    -webkit-transform: translateX(-8px) scale(1.005);
            transform: translateX(-8px) scale(1.005);
    -webkit-animation-timing-function: ease-in;
            animation-timing-function: ease-in;
  }
  100% {
    -webkit-transform: translateX(0) scale(1);
            transform: translateX(0) scale(1);
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
  }
}

@keyframes bounce-in-left {
  0% {
    -webkit-transform: translateX(-500px) scale(1);
            transform: translateX(-500px) scale(1);
    -webkit-animation-timing-function: ease-in;
            animation-timing-function: ease-in;
    opacity: 0;
  }
  38% {
    -webkit-transform: translateX(0) scale(0.94);
            transform: translateX(0) scale(0.94);
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
    opacity: 1;
  }
  55% {
    -webkit-transform: translateX(-65px) scale(1.02);
            transform: translateX(-65px) scale(1.02);
    -webkit-animation-timing-function: ease-in;
            animation-timing-function: ease-in;
  }
  72% {
    -webkit-transform: translateX(0) scale(0.96);
            transform: translateX(0) scale(0.96);
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
  }
  81% {
    -webkit-transform: translateX(-28px) scale(1.01);
            transform: translateX(-28px) scale(1.01);
    -webkit-animation-timing-function: ease-in;
            animation-timing-function: ease-in;
  }
  90% {
    -webkit-transform: translateX(0) scale(0.98);
            transform: translateX(0) scale(0.98);
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
  }
  95% {
    -webkit-transform: translateX(-8px) scale(1.005);
            transform: translateX(-8px) scale(1.005);
    -webkit-animation-timing-function: ease-in;
            animation-timing-function: ease-in;
  }
  100% {
    -webkit-transform: translateX(0) scale(1);
            transform: translateX(0) scale(1);
    -webkit-animation-timing-function: ease-out;
            animation-timing-function: ease-out;
  }
}

.social__link-1 {
  animation: bounce-in-left 1.5s 0.2s both;
}

.social__link-2 {
  animation: bounce-in-left 1.5s 0.35s both;
}

.social__link-3 {
  animation: bounce-in-left 1.5s 0.5s both;
}

.social__link-4 {
  animation: bounce-in-left 1.5s 0.65s both;
}

@media (prefers-reduced-motion: reduce) {
  .social__link {
    animation: none;
    transform: none;
  }
}

/* POSITIONS + ANIMATIONS (SOFI-STYLE) */

/* react icon */
.skill-0 {
  --x: 0px;
  --y: -117px;
  --start-x: 600px;
  --start-y: 0px;
  --start-scale: 6.8;
  --enter-delay: 0.4s;
  --float-delay: 2s;
}

.skill-1 {
  --x: 91px;
  --y: -73px;
  --start-x: 120px;
  --start-y: 20px;
  --start-scale: 6.2;
  --enter-delay: 0.4s;
  --float-delay: 1.6s;
}

.skill-2 {
  --x: 114px;
  --y: 26px;
  --start-x: 650px;
  --start-y: 0px;
  --start-scale: 6.2;
  --enter-delay: 0.3s;
  --float-delay: 3.2s;
}

.skill-3 {
  --x: 51px;
  --y: 105px;
  --start-x: 600px;
  --start-y: 0px;
  --start-scale: 6.8;
  --enter-delay: 0.2s;
  --float-delay: 2.1s;
}

.skill-4 {
  --x: -51px;
  --y: 105px;
  --start-x: 650px;
  --start-y: 0px;
  --start-scale: 6.2;
  --enter-delay: 0.4s;
  --float-delay: 1.5s;
}

.skill-5 {
  --x: -114px;
  --y: 26px;
  --start-x: 140px;
  --start-y: -10px;
  --start-scale: 6.2;
  --enter-delay: 0.2s;
  --float-delay: 1.3s;
}

.skill-6 {
  --x: -91px;
  --y: -73px;
  --start-x: 650px;
  --start-y: 0px;
  --start-scale: 6.2;
  --enter-delay: 0.2s;
  --float-delay: 2.1s;
}

@keyframes from-right {
  from {
    opacity: 0;
    transform:
      translate(-50%, -50%)
      translate(var(--x), var(--y))
      translate(var(--start-x), var(--start-y))
      scale(var(--start-scale));
  }
  to {
    opacity: 1;
    transform:
      translate(-50%, -50%)
      translate(var(--x), var(--y))
      scale(1);
  }
}

@keyframes floating {
  0%, 100% { translate: 0 0; }
  50% { translate: 0 -6px; }
}
</style>
