---
import "/src/styles/globals.css";
import { Mail, Download, ArrowUpRight } from "@lucide/astro";
import { Image } from "astro:assets";

import myBitmoji from "../assets/bitmoji.png";
import Encryptedtext from "./Encryptedtext.astro";
import Seperator from "./Seperator.astro";
import GradientBorder from "./GradientBorder.astro";

/* React + Framer Motion */
import HeroLampMotion from "./hero/HeroLampMotion.tsx";
import GlowCardMotion from "./hero/GlowCardMotion.tsx";
import { TechIcon } from "./hero/HeroMotion.tsx";

/* FULL base64 strings â€” DO NOT TRUNCATE */
const github = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiB2aWV3Qm94PSIwIDAgMTI4IDEyOCI+PGcgZmlsbD0iI2JiMzNmZmU2Ij48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02NCA1LjEwM2MtMzMuMzQ3IDAtNjAuMzg4IDI3LjAzNS02MC4zODggNjAuMzg4YzAgMjYuNjgyIDE3LjMwMyA0OS4zMTcgNDEuMjk3IDU3LjMwM2MzLjAxNy41NiA0LjEyNS0xLjMxIDQuMTI1LTIuOTA1YzAtMS40NC0uMDU2LTYuMTk3LS4wODItMTEuMjQzYy0xNi44IDMuNjUzLTIwLjM0NS03LjEyNS0yMC4zNDUtNy4xMjVjLTIuNzQ3LTYuOTgtNi43MDUtOC44MzYtNi43MDUtOC44MzZjLTUuNDgtMy43NDguNDEzLTMuNjcuNDEzLTMuNjdjNi4wNjMuNDI1IDkuMjU3IDYuMjIzIDkuMjU3IDYuMjIzYzUuMzg2IDkuMjMgMTQuMTI3IDYuNTYyIDE3LjU3MyA1LjAyYy41NDItMy45MDMgMi4xMDctNi41NjggMy44MzQtOC4wNzZjLTEzLjQxMy0xLjUyNS0yNy41MTQtNi43MDQtMjcuNTE0LTI5Ljg0M2MwLTYuNTkzIDIuMzYtMTEuOTggNi4yMjMtMTYuMjFjLS42MjgtMS41Mi0yLjY5NS03LjY2Mi41ODQtMTUuOThjMCAwIDUuMDctMS42MjMgMTYuNjEgNi4xOUM1My43IDM1IDU4Ljg2NyAzNC4zMjcgNjQgMzQuMzA0YzUuMTMuMDIzIDEwLjMuNjk0IDE1LjEyNyAyLjAzM2MxMS41MjYtNy44MTMgMTYuNTktNi4xOSAxNi41OS02LjE5YzMuMjg3IDguMzE3IDEuMjIgMTQuNDYuNTkzIDE1Ljk4YzMuODcyIDQuMjMgNi4yMTUgOS42MTcgNi4yMTUgMTYuMjFjMCAyMy4xOTQtMTQuMTI3IDI4LjMtMjcuNTc0IDI5Ljc5NmMyLjE2NyAxLjg3NCA0LjA5NyA1LjU1IDQuMDk3IDExLjE4M2MwIDguMDgtLjA3IDE0LjU4My0uMDcgMTYuNTcyYzAgMS42MDcgMS4wODggMy40OSA0LjE0OCAyLjg5N2MyMy45OC03Ljk5NCA0MS4yNjMtMzAuNjIyIDQxLjI2My01Ny4yOTRDMTI0LjM4OCAzMi4xNCA5Ny4zNSA1LjEwNCA2NCA1LjEwNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==";
const linkedin = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjYmIzM2ZmIiBkPSJNMTkgM2EyIDIgMCAwIDEgMiAydjE0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0yVjVhMiAyIDAgMCAxIDItMnptLS41IDE1LjV2LTUuM2EzLjI2IDMuMjYgMCAwIDAtMy4yNi0zLjI2Yy0uODUgMC0xLjg0LjUyLTIuMzIgMS4zdi0xLjExaC0yLjc5djguMzdoMi43OXYtNC45M2MwLS43Ny42Mi0xLjQgMS4zOS0xLjRhMS40IDEuNCAwIDAgMSAxLjQgMS40djQuOTN6TTYuODggOC41NmExLjY4IDEuNjggMCAwIDAgMS42OC0xLjY4YzAtLjkzLS43NS0xLjY5LTEuNjgtMS42OWExLjY5IDEuNjkgMCAwIDAtMS42OSAxLjY5YzAgLjkzLjc2IDEuNjggMS42OSAxLjY4bTEuMzkgOS45NHYtOC4zN0g1LjV2OC4zN3oiLz48L3N2Zz4=";
const bluesky = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjI2IiB2aWV3Qm94PSIwIDAgMjU2IDIyNiI+PHJlY3Qgd2lkdGg9IjI1NiIgaGVpZ2h0PSIyMjYiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjYmIzM2ZmIiBkPSJNNTUuNDkxIDE1LjE3MmMyOS4zNSAyMi4wMzUgNjAuOTE3IDY2LjcxMiA3Mi41MDkgOTAuNjg2YzExLjU5Mi0yMy45NzQgNDMuMTU5LTY4LjY1MSA3Mi41MDktOTAuNjg2QzIyMS42ODYtLjcyNyAyNTYtMTMuMDI4IDI1NiAyNi4xMTZjMCA3LjgxOC00LjQ4MiA2NS42NzQtNy4xMTEgNzUuMDY4Yy05LjEzOCAzMi42NTQtNDIuNDM2IDQwLjk4My03Mi4wNTcgMzUuOTQyYzUxLjc3NSA4LjgxMiA2NC45NDYgMzggMzYuNTAxIDY3LjE4N2MtNTQuMDIxIDU1LjQzMy03Ny42NDQtMTMuOTA4LTgzLjY5Ni0zMS42NzZjLTEuMTEtMy4yNTctMS42My00Ljc4LTEuNjM3LTMuNDg1Yy0uMDA4LTEuMjk2LS41MjcuMjI4LTEuNjM3IDMuNDg1Yy02LjA1MiAxNy43NjgtMjkuNjc1IDg3LjExLTgzLjY5NiAzMS42NzZjLTI4LjQ0NS0yOS4xODctMTUuMjc0LTU4LjM3NSAzNi41LTY3LjE4N2MtMjkuNjIgNS4wNDEtNjIuOTE4LTMuMjg4LTcyLjA1Ni0zNS45NDJDNC40ODIgOTEuNzkgMCAzMy45MzQgMCAyNi4xMTZDMC0xMy4wMjggMzQuMzE0LS43MjcgNTUuNDkxIDE1LjE3MiIvPjwvc3ZnPg==";

const techLogos = [
  { icon: "logos:react", color: "#00D8FF", delay: 0.5 },
  { icon: "logos:laravel", color: "#FF2D20", delay: 0.5 },
  { icon: "logos:python", color: "#FECE3D", delay: 0.5 },
  { icon: "logos:linux-tux", color: "#FFB456", delay: 0.5 },
  { icon: "logos:vue", color: "#41B883", delay: 0.5 },
  { icon: "logos:nodejs-icon", color: "#83CD29", delay: 0.5 },
  { icon: "logos:docker-icon", color: "#2396ED", delay: 0.5 },
];

const radius = 85;
const angleOffset = -90;

const positions = techLogos.map((_, index) => {
  const angle = (angleOffset + (index * 360) / techLogos.length) * (Math.PI / 180);
  return { x: Math.round(Math.cos(angle) * radius), y: Math.round(Math.sin(angle) * radius) };
});

const socialLinks = [
  { icon: github, link: "https://github.com/rywils", isImage: true },
  { icon: linkedin, link: "https://linkedin.com/in/rywils", isImage: true },
  { icon: bluesky, link: "https://bluesky.com/rywils", isImage: true },
  { Icon: Mail, link: "mailto:ryan@ryanwilson.io", isImage: false },
];
---

<div class="h-full w-full flex flex-col md:items-center md:justify-center antialiased relative border-b-1 border-[#10191d] shadow-md shadow-[#0a0a0a] overflow-x-hidden">
  <div class="p-4 mx-auto relative z-10 w-full pt-10 md:pt-0">

    <section id="hero" class="flex flex-col justify-center relative py-6 overflow-visible">
      <HeroLampMotion client:load />

      <GlowCardMotion className="mt-10 max-w-4xl mx-auto" client:load>
        <div class="max-w-5xl mx-auto px-8 sm:px-12 lg:px-16 relative z-50 h-full flex justify-center">
          <div class="flex flex-col lg:flex-row justify-center gap-12 lg:gap-20 relative z-50 w-full max-w-5xl mx-auto p-4">

            <div class="mt-12 lg:mt-0 mb-8 lg:mb-0 flex justify-center flex-shrink-0 items-center">
              <div class="relative w-32 h-32 sm:w-36 sm:h-36">

                {techLogos.map((tech, index) => (
                  <TechIcon
                    client:load
                    icon={tech.icon}
                    color={tech.color}
                    x={positions[index].x}
                    y={positions[index].y}
                    delay={tech.delay}
                  />
                ))}

                <div class="absolute inset-0 bg-gradient-to-r from-[var(--primary-blue)]/60 via-[var(--secondary-purple)] to-[var(--primary-green)]/60 rounded-full blur-xl opacity-50"></div>

                <Image
                  src={myBitmoji}
                  alt="Avatar"
                  class="relative w-32 h-32 sm:w-36 sm:h-36 rounded-full object-cover border-4 border-[var(--secondary-purple)]/20"
                  loading="eager"
                />
              </div>
            </div>

            <div class="text-center lg:text-left flex-1 max-w-2xl relative z-50">
              <h1 class="text-3xl sm:text-5xl mb-2 font-bold text-(--primary-green) relative z-50">
                Ryan Wilson
              </h1>

              <p class="text-sm md:text-lg lg:text-xl text-muted-foreground -z-1">
                Solutions Architect & Full-Stack Developer
              </p>

              <div class="text-sm md:text-lg mb-4 -z-1 uppercase flex gap-2 h-5 items-center justify-center lg:justify-start text-muted-foreground">
                <Encryptedtext text="Security" />
                <Seperator orientation="vertical" />
                <Encryptedtext text="Linux" revealDelayMs={200} flipDelayMs={50} />
                <Seperator orientation="vertical" />
                <Encryptedtext text="DevOps" revealDelayMs={300} flipDelayMs={50} />
              </div>

              <GradientBorder class="animate-fade-up animate-duration-[4ms] delay-400" />

              <p class="text-lg max-w-2xl mx-auto lg:mx-0 mb-8 text-muted-foreground">
                I'm a Solutions Architect, Full-Stack Developer, and Cybersecurity Enthusiast. I primarily come from a background of network engineering and cloud architecture with a passion for building efficient, scalable, and secure digital solutions.
              </p>
            </div>
          </div>
        </div>

        <div class="absolute top-5 right-5 flex flex-col items-center justify-center lg:justify-end gap-3 mt-2 z-50">
          {socialLinks.map(({ icon, link, isImage }) => (
            <a
              href={link}
              target="_blank"
              rel="noopener noreferrer"
              class="p-2 rounded-full border border-purple-500 transition-all duration-300 hover:scale-110 hover:-translate-y-1 active:scale-90 cursor-pointer relative z-50"
            >
              {isImage ? (
                <img src={icon} alt="Social icon" class="w-4 h-4 pointer-events-none" />
              ) : (
                <Mail size={16} class="text-purple-500" />
              )}
            </a>
          ))}
        </div>
      </GlowCardMotion>
    </section>

    <div class="hidden md:flex w-full items-center justify-evenly gap-4 mb-4 mt-2 mx-12 pb-8">
      <a href="#contact" class="text-center py-3 w-32 text-nowrap px-4 rounded-lg glow-primary-orange hover:bg-secondary-purple transition-all duration-300 hover:scale-105 active:scale-95 text-sm">
        Get In Touch
      </a>

      <a href="/projects" class="text-center py-3 w-32 text-nowrap px-4 bg-primary-blue rounded-lg glow-primary-blue hover:bg-secondary-purple transition-all duration-350 hover:scale-105 active:scale-95 text-sm">
        View Work
      </a>

      <a href="/resume/resume_ryanwilsonio.pdf" class="text-center py-3 w-36 text-nowrap px-4 rounded-lg glow-primary-betweenpurple hover:bg-secondary-purple transition-all duration-400 hover:scale-105 active:scale-95 text-sm">
        <div class="flex items-center justify-center">
          Download CV <Download class="ml-2" size={16} />
        </div>
      </a>

      <a href="/resume" class="text-center py-3 w-34 text-nowrap px-4 rounded-lg glow-primary-pink hover:bg-secondary-purple transition-all duration-400 hover:scale-105 active:scale-95 text-sm">
        <div class="flex items-center justify-center">
          Resume <ArrowUpRight class="ml-2" size={16} />
        </div>
      </a>

      <a href="#" class="text-center py-3 w-32 text-nowrap px-4 rounded-lg glow-primary-orange hover:bg-secondary-purple transition-all duration-450 hover:scale-105 active:scale-95 text-sm">
        <div class="flex items-center justify-center">
          Blog <ArrowUpRight class="ml-2" size={16} />
        </div>
      </a>
    </div>
  </div>
</div>
