---
import '/src/styles/globals.css';
import { Mail, Download, ArrowUpRight } from '@lucide/astro';
import { Image } from 'astro:assets';
import myBitmoji from '../assets/bitmoji.png';
import Encryptedtext from './Encryptedtext.astro';
import Seperator from './Seperator.astro';
import GradientBorder from './GradientBorder.astro';
import GlowCard from './ui/GlowCard.astro';
import HeroLamp from './ui/HeroLamp.astro';

const github = "data:image/svg+xml;base64,...";
const linkedin = "data:image/svg+xml;base64,...";
const bluesky = "data:image/svg+xml;base64,...";

const logos = [
  { icon: 'logos:react', color: '#61DAFB' },
  { icon: 'logos:laravel', color: '#FF2D20' },
  { icon: 'logos:python', color: '#3776AB' },
  { icon: 'logos:linux-tux', color: '#FCC624' },
  { icon: 'logos:vue', color: '#4FC08D' },
  { icon: 'logos:nodejs-icon', color: '#339933' },
  { icon: 'logos:docker-icon', color: '#2496ED' },
];

const socialLinks = [
  { icon: github, link: 'https://github.com/rywils', isImage: true },
  { icon: linkedin, link: 'https://linkedin.com/in/rywils', isImage: true },
  { icon: bluesky, link: 'https://bluesky.com/rywils', isImage: true },
  { Icon: Mail, link: 'mailto:ryan@ryanwilson.io', isImage: false },
];
---

<div class="h-full w-full flex flex-col md:items-center md:justify-center antialiased relative border-b-1 border-[#10191d] shadow-md shadow-[#0a0a0a] overflow-x-hidden">
  <div class="p-4 mx-auto relative z-10 w-full pt-10 md:pt-0">
    <section id="hero" class="flex flex-col justify-center relative py-6 overflow-visible">
      <HeroLamp />

      <GlowCard class="mt-10 max-w-4xl mx-auto">
        <div class="max-w-5xl mx-auto px-8 sm:px-12 lg:px-16 relative z-50 h-full flex justify-center">
          <div class="flex flex-col lg:flex-row justify-center gap-12 lg:gap-20 relative z-50 w-full max-w-5xl mx-auto p-4">

            <!-- AVATAR + SKILLS -->
            <div class="mt-12 lg:mt-0 mb-8 lg:mb-0 flex justify-center flex-shrink-0 items-center">
              <div class="profile-container">
                <div class="profile-picture">
                  <Image src={myBitmoji} alt="Avatar" class="profile-img" loading="eager" />
                </div>

                <!-- SOFI-STYLE ICONS -->
                <div class="skills-layer">
                  {logos.map((logo, i) => (
                    <span class={`skill skill-${i}`} style={`--glow:${logo.color}`}>
                      <img src={`https://api.iconify.design/${logo.icon}.svg`} alt="" />
                    </span>
                  ))}
                </div>
              </div>
            </div>

            <!-- TEXT -->
            <div class="text-center lg:text-left flex-1 max-w-2xl relative z-50">
              <h1 class="text-3xl sm:text-5xl mb-2 font-bold text-(--primary-green)">
                Ryan Wilson
              </h1>

              <p class="text-sm md:text-lg lg:text-xl text-muted-foreground">
                Solutions Architect & Full-Stack Developer
              </p>

              <div class="text-sm md:text-lg mb-4 uppercase flex gap-2 h-5 items-center justify-center lg:justify-start text-muted-foreground">
                <Encryptedtext text="Security" />
                <Seperator orientation="vertical" />
                <Encryptedtext text="Linux" revealDelayMs={200} flipDelayMs={50} />
                <Seperator orientation="vertical" />
                <Encryptedtext text="DevOps" revealDelayMs={300} flipDelayMs={50} />
              </div>

              <GradientBorder />

              <p class="text-lg max-w-2xl mx-auto lg:mx-0 mb-8 text-muted-foreground">
                I'm a Solutions Architect, Full-Stack Developer, and Cybersecurity Enthusiast. I primarily come from a background of network engineering and cloud architecture with a passion for building efficient, scalable, and secure digital solutions.
              </p>
            </div>
          </div>
        </div>

        <!-- SOCIALS -->
        <div class="absolute top-5 right-5 flex flex-col items-center gap-3 z-50">
          {socialLinks.map(({ icon, link, isImage }) => (
            <a href={link} target="_blank" rel="noopener noreferrer"
              class="p-2 rounded-full border border-purple-500 hover:scale-110 transition">
              {isImage ? <img src={icon} class="w-4 h-4" /> : <Mail size={16} />}
            </a>
          ))}
        </div>
      </GlowCard>
    </section>
  </div>
</div>

<style>
.profile-container {
  position: relative;
  width: 180px;
  height: 180px;
  display: grid;
  place-items: center;
}

.profile-picture {
  z-index: 2;
  position: relative;
  width: 128px;
  height: 128px;
  display: grid;
  place-items: center;
}

.profile-img {
  width: 128px;
  height: 128px;
  border-radius: 50%;
  border: 4px solid rgba(138,77,255,0.2);
}

/* === SOFI STYLE ICONS === */

.skills-layer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  transform: translate(-18px, -16px);
}

.skill {
  position: absolute;
  width: 36px;
  height: 36px;
  background: rgba(10,10,10,.9);
  border-radius: 10px;
  border: 1.5px solid var(--glow);
  box-shadow: 0 0 14px color-mix(in srgb, var(--glow) 65%, transparent);
  opacity: 0;
}

.skill img {
  width: 70%;
  height:   70%;
  margin: 15%;
}

/* POSITIONS + ANIMATIONS */
.skill {
  --radius: 90px;
  --angle: 0deg;

  top: 50%;
  left: 50%;
  transform:
    rotate(var(--angle))
    translate(var(--radius))
    rotate(calc(-1 * var(--angle)));
}

.skill-0 { --angle:   0deg; }
.skill-1 { --angle:  60deg; }
.skill-2 { --angle: 120deg; }
.skill-3 { --angle: 180deg; }
.skill-4 { --angle: 240deg; }
.skill-5 { --angle: 300deg; }
.skill-6 { --angle: 330deg; } /* opti

onal extra */

.skill-0 { top:-14%; left:42%; transform:translateY(-1200px) scale(6); animation: enter 1.25s forwards 0.2s, float 6s infinite 1.6s; }
.skill-1 { top:10%; right:-10%; transform:translateX(1200px) scale(6); animation: enter 1.25s forwards 0.3s, float 6.2s infinite 1.7s; }
.skill-2 { bottom:26%; right:-12%; transform:translateX(1200px) scale(6); animation: enter 1.25s forwards 0.4s, float 5.8s infinite 1.8s; }
.skill-3 { bottom:-10%; right:22%; transform:translateY(1200px) scale(6); animation: enter 1.25s forwards 0.3s, float 6.4s infinite 1.7s; }
.skill-4 { bottom:-8%; left:22%; transform:translateX(-1200px) scale(6); animation: enter 1.25s forwards 0.4s, float 5.9s infinite 1.8s; }
.skill-5 { bottom:24%; left:-12%; transform:translateX(-1200px) scale(6); animation: enter 1.25s forwards 0.2s, float 6.1s infinite 1.6s; }
.skill-6 { top:10%; left:-10%; transform:translateX(-1200px) scale(6); animation: enter 1.25s forwards 0.35s, float 6s infinite 1.75s; }

/* TOP */
.skill-0 {
  top: 5.56%;
  left: 50%;
  transform: translate(-50%, -1200px) scale(6.2);
}

/* TOP-RIGHT */
.skill-1 {
  top: 22.29%;
  left: 84.75%;
  transform: translate(1200px, -1200px) scale(6.2);
}

/* RIGHT */
.skill-2 {
  top: 59.89%;
  left: 93.33%;
  transform: translate(1200px, -50%) scale(6.2);
}

/* BOTTOM-RIGHT */
.skill-3 {
  top: 90.04%;
  left: 69.28%;
  transform: translate(1200px, 1200px) scale(6.2);
}

/* BOTTOM */
.skill-4 {
  top: 90.04%;
  left: 30.72%;
  transform: translate(-50%, 1200px) scale(6.2);
}

/* BOTTOM-LEFT */
.skill-5 {
  top: 59.89%;
  left: 6.67%;
  transform: translate(-1200px, 1200px) scale(6.2);
}

/* LEFT */
.skill-6 {
  top: 22.29%;
  left: 15.25%;
  transform: translate(-1200px, -50%) scale(6.2);
}


@keyframes enter {
  to { opacity:1; transform:none; }
}

@keyframes float {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-2px); }
}
</style>
